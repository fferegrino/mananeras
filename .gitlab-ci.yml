image: python:3.9

stages:
  - create-datasset

crawl:

  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"

  stage: create-datasset

  before_script:
    - git config --global user.email "runner@gitlab.com"
    - git config --global user.name "GitLab Runner"

  variables:
      LC_ALL: C.UTF-8
      LANG: C.UTF-8

  script:
    - pip install pipenv
    - pipenv install --dev --system
    - KAGGLE_KEY=$KAGGLE_KEY KAGGLE_USERNAME=ioexception python -m mananeras
    - git add articulos/
    - git add urls.txt
    - echo
    - git status
    - git commit -m "Add new documents"
    - git push http://fferegrino:${CI_ACCESS_TOKEN}@gitlab.com/thatcsharpguy/datasets/mananeras.git HEAD:main
